---
title: "Exploring the relationships between a set of variables and miles per gallon for a collection of cars"
---

# Exploring the relationships between a set of variables and miles per gallon for a collection of cars

## Synopsis

Looking at a data set of a collection of cars, we are interested in exploring the relationship between a set of variables and miles per gallon (MPG). We are particularly interested in the following two questions:

* Is an automatic or manual transmission better for MPG
* Quantify the MPG difference between automatic and manual transmissions

## Exploring the data

Let's load dataset and look at the data primary features:

```{r}
library(datasets)
data(mtcars)

dim(mtcars)
head(mtcars)
summary(mtcars)
```

Dataset contains following variables:

1 | mpg	 | Miles/(US) gallon
2 | cyl  | Number of cylinders
3 | disp | Displacement (cu.in.)
4 | hp   | Gross horsepower
5 | drat | Rear axle ratio
6 | wt   | Weight (lb/1000)
7 | qsec | 1/4 mile time
8 | vs   | V/S
9 | am   | Transmission (0 = automatic, 1 = manual)
10| gear | Number of forward gears
11| carb | Number of carburetors

As we can see, there are bunch of variables that should be factors rather than numeric. Let's transofrm them appropriately:

```{r}
mtcars$cyl = factor(mtcars$cyl)
mtcars$vs = factor(mtcars$vs)
mtcars$am = factor(mtcars$am)
mtcars$gear = factor(mtcars$gear)
mtcars$carb = factor(mtcars$carb)

summary(mtcars)
```

Let's look at relationships between different variables:

```{r}
plot(mtcars)
```

## Building data model

Let's try to build data model based on all possible variables:

```{r}
fit1 <- lm(mpg ~ am, mtcars)
fit2 <- lm(mpg ~ am + cyl, mtcars)
fit3 <- lm(mpg ~ am + cyl + disp, mtcars)
fit4 <- lm(mpg ~ am + cyl + disp + hp, mtcars)
fit5 <- lm(mpg ~ am + cyl + disp + hp + drat, mtcars)
fit6 <- lm(mpg ~ am + cyl + disp + hp + drat + wt, mtcars)
fit7 <- lm(mpg ~ am + cyl + disp + hp + drat + wt + qsec, mtcars)
fit8 <- lm(mpg ~ am + cyl + disp + hp + drat + wt + qsec + vs, mtcars)
fit8 <- lm(mpg ~ am + cyl + disp + hp + drat + wt + qsec + vs + gear, mtcars)
fit9 <- lm(mpg ~ am + cyl + disp + hp + drat + wt + qsec + vs + gear + carb, mtcars)

anova(fit1, fit2, fit3, fit4, fit5, fit6, fit7, fit8, fit9)
```

As we can see, besides transmission information, number of cylinders and gross horsepower pass sygnificance test. Let's build model, based on them:

```{r}
fit <- lm(mpg ~ am + cyl + hp, mtcars)
summary(fit)
```

## Summary